# MoLe v0.22.0 実機テストレポート

**テスト実施日**: [YYYY-MM-DD]
**テスト実施者**: [名前]
**テスト環境**:
- **デバイス**: [デバイス名 / エミュレーター名]
- **Androidバージョン**: [例: Android 13 / API 33]
- **MoLeバージョン**: 0.22.0-debug
- **APKサイズ**: 7.0 MB

---

## 1. テスト環境の準備

### 1.1 hledger-webサーバー

| サーバー | URL | ステータス | 備考 |
|---------|-----|----------|------|
| v1.23 | http://[IP]:5023 | ✅/❌ | 後方互換性確認用 |
| v1.32 | http://[IP]:5032 | ✅/❌ | 新機能確認用 |
| v1.40 | http://[IP]:5040 | ✅/❌ | 中間バージョン |
| v1.50 | http://[IP]:5050 | ✅/❌ | 最新バージョン |

**サーバー起動コマンド**:
```bash
docker-compose -f docker-compose.test.yml up -d
```

**サーバー確認**:
```bash
curl http://localhost:5032/version  # 期待: 1.32.x
curl http://localhost:5040/version  # 期待: 1.40.x
curl http://localhost:5050/version  # 期待: 1.50.x
curl http://localhost:5023/version  # 期待: 1.23.x
```

### 1.2 APKインストール

**インストールコマンド**:
```bash
adb install app/build/outputs/apk/debug/app-debug.apk
```

**インストール結果**: ✅/❌

**問題が発生した場合の対処**:
- [ ] 既存アプリをアンインストール (`adb uninstall net.ktnx.mobileledger.debug`)
- [ ] 再度インストール

---

## 2. 基本機能テスト

### 2.1 アプリの起動

| 項目 | 結果 | 備考 |
|------|------|------|
| スプラッシュ画面表示 | ✅/❌ | |
| メイン画面表示 | ✅/❌ | |
| クラッシュなし | ✅/❌ | |
| バージョン表示 (メニュー→About) | ✅/❌ | 0.22.0 |

**スクリーンショット**: [添付可能であれば]

### 2.2 プロファイルの作成と管理

#### v1.32サーバーのプロファイル

| 項目 | 結果 | 備考 |
|------|------|------|
| プロファイル作成 | ✅/❌ | 名前: Test v1.32 |
| URL設定 | ✅/❌ | http://[IP]:5032 |
| バージョン検出開始 | ✅/❌ | "Detecting version..." 表示 |
| バージョン検出完了 | ✅/❌ | |
| 検出されたサーバーバージョン | [例: 1.32.3] | |
| 選択されたAPI | [例: v1_32] | |
| プロファイル保存 | ✅/❌ | |

#### v1.40サーバーのプロファイル

| 項目 | 結果 | 備考 |
|------|------|------|
| プロファイル作成 | ✅/❌ | 名前: Test v1.40 |
| 検出されたサーバーバージョン | [例: 1.40.1] | |
| 選択されたAPI | [例: v1_40] | |

#### v1.50サーバーのプロファイル

| 項目 | 結果 | 備考 |
|------|------|------|
| プロファイル作成 | ✅/❌ | 名前: Test v1.50 |
| 検出されたサーバーバージョン | [例: 1.50.0] | |
| 選択されたAPI | [例: v1_50] | |

#### v1.23サーバーのプロファイル（後方互換性）

| 項目 | 結果 | 備考 |
|------|------|------|
| プロファイル作成 | ✅/❌ | 名前: Test v1.23 |
| 検出されたサーバーバージョン | [例: 1.23.0] | |
| 選択されたAPI | [例: v1_23] | |

### 2.3 アカウント一覧の表示

**使用プロファイル**: Test v1.32

| 項目 | 結果 | 備考 |
|------|------|------|
| アカウント一覧取得 | ✅/❌ | |
| アカウント表示数 | [数] | 期待: 6-8個 |
| assets:bank:checking 表示 | ✅/❌ | 残高: $4,842.00 |
| expenses:food 表示 | ✅/❌ | 残高: $250.50 |
| expenses:transport 表示 | ✅/❌ | 残高: $32.50 |
| income:salary 表示 | ✅/❌ | 残高: -$6,000.00 |
| 階層構造の表示 | ✅/❌ | インデント正しいか |
| スクロール動作 | ✅/❌ | |

**スクリーンショット**: [添付可能であれば]

### 2.4 トランザクション一覧の表示

**対象アカウント**: assets:bank:checking

| 項目 | 結果 | 備考 |
|------|------|------|
| トランザクション取得 | ✅/❌ | |
| 表示トランザクション数 | [数] | 期待: 11個 |
| 日付表示 | ✅/❌ | 正しい順序か |
| 説明文表示 | ✅/❌ | "Grocery Shopping" 等 |
| 金額表示 | ✅/❌ | 正負正しいか |
| スクロール動作 | ✅/❌ | |

**スクリーンショット**: [添付可能であれば]

### 2.5 トランザクションの追加

**テストトランザクション**:
- 日付: [今日の日付]
- 説明: "Test Transaction from MoLe"
- アカウント1: expenses:food
- 金額1: 25.00 USD
- アカウント2: assets:bank:checking (自動)

| 項目 | 結果 | 備考 |
|------|------|------|
| 新規トランザクション画面表示 | ✅/❌ | |
| 日付入力 | ✅/❌ | |
| 説明入力 | ✅/❌ | |
| アカウント選択 | ✅/❌ | |
| 金額入力 | ✅/❌ | |
| 通貨選択 | ✅/❌ | |
| 2番目のアカウント自動入力 | ✅/❌ | |
| 保存実行 | ✅/❌ | |
| エラーなし | ✅/❌ | |
| 一覧に反映 | ✅/❌ | |
| 残高更新 | ✅/❌ | food: +25, checking: -25 |

**スクリーンショット**: [添付可能であれば]

### 2.6 データの更新

| 項目 | 結果 | 備考 |
|------|------|------|
| Pull to Refresh実行 | ✅/❌ | 下にスワイプ |
| 更新アニメーション表示 | ✅/❌ | |
| データ再取得 | ✅/❌ | |
| 最新データ表示 | ✅/❌ | |

---

## 3. 新規実装のテスト

### 3.1 バージョン検出の精度

各サーバーで正しいAPIバージョンが選択されることを確認。

| hledger-web | サーバーバージョン | 選択されたAPI | 結果 | 備考 |
|-------------|------------------|--------------|------|------|
| v1.23 | [例: 1.23.0] | [例: v1_23] | ✅/❌ | |
| v1.32 | [例: 1.32.3] | [例: v1_32] | ✅/❌ | |
| v1.40 | [例: 1.40.1] | [例: v1_40] | ✅/❌ | |
| v1.50 | [例: 1.50.0] | [例: v1_50] | ✅/❌ | |

**期待される動作**:
- v1.23サーバー → API v1_23
- v1.32サーバー → API v1_32
- v1.40サーバー → API v1_40
- v1.50サーバー → API v1_50

### 3.2 機能の互換性確認

全てのバージョンで同じ操作が動作することを確認。

| 操作 | v1.23 | v1.32 | v1.40 | v1.50 | 備考 |
|------|-------|-------|-------|-------|------|
| アカウント取得 | ✅/❌ | ✅/❌ | ✅/❌ | ✅/❌ | |
| トランザクション取得 | ✅/❌ | ✅/❌ | ✅/❌ | ✅/❌ | |
| トランザクション追加 | ✅/❌ | ✅/❌ | ✅/❌ | ✅/❌ | |
| データ更新 | ✅/❌ | ✅/❌ | ✅/❌ | ✅/❌ | |

### 3.3 後方互換性の確認

v1.23サーバー（既存サポート）で全機能が動作することを確認。

| 項目 | 結果 | 備考 |
|------|------|------|
| プロファイル作成 | ✅/❌ | |
| API検出 (v1_23) | ✅/❌ | |
| アカウント表示 | ✅/❌ | |
| トランザクション表示 | ✅/❌ | |
| トランザクション追加 | ✅/❌ | |
| エラーなし | ✅/❌ | |

**結論**: v1.23サーバーでの後方互換性は ✅保持されている / ❌問題あり

---

## 4. パフォーマンステスト

### 4.1 応答時間

| 操作 | 時間 (秒) | 評価 |
|------|----------|------|
| アプリ起動 | | ✅ < 3秒 / ❌ >= 3秒 |
| プロファイル作成 | | ✅ < 2秒 / ❌ >= 2秒 |
| アカウント取得 | | ✅ < 2秒 / ❌ >= 2秒 |
| トランザクション取得 | | ✅ < 2秒 / ❌ >= 2秒 |
| トランザクション追加 | | ✅ < 3秒 / ❌ >= 3秒 |
| データ更新 | | ✅ < 2秒 / ❌ >= 2秒 |

### 4.2 メモリ使用量

**確認方法**:
```bash
adb shell dumpsys meminfo net.ktnx.mobileledger.debug | grep "TOTAL"
```

**結果**: [例: TOTAL PSS: 85 MB]

**評価**: ✅ 正常 / ⚠️ やや高い / ❌ 異常に高い

### 4.3 バッテリー消費

**テスト方法**: 10分間使用後のバッテリー消費を確認

**結果**: [例: 2%減少]

**評価**: ✅ 正常 / ⚠️ やや高い / ❌ 異常に高い

---

## 5. UIUXテスト

### 5.1 画面表示

| 項目 | 結果 | 備考 |
|------|------|------|
| レイアウトの崩れなし | ✅/❌ | |
| テキストの切れなし | ✅/❌ | |
| アイコンの表示 | ✅/❌ | |
| 色の適切さ | ✅/❌ | |
| フォントサイズ | ✅/❌ | 読みやすいか |

### 5.2 操作性

| 項目 | 結果 | 備考 |
|------|------|------|
| タップ反応 | ✅/❌ | |
| スワイプ動作 | ✅/❌ | |
| スクロール滑らかさ | ✅/❌ | |
| 戻るボタン動作 | ✅/❌ | |
| メニュー表示 | ✅/❌ | |

### 5.3 ダークモード（該当する場合）

| 項目 | 結果 | 備考 |
|------|------|------|
| ダークモード切替 | ✅/❌/N/A | |
| 色の見やすさ | ✅/❌/N/A | |
| コントラスト適切 | ✅/❌/N/A | |

---

## 6. エラーハンドリング

### 6.1 ネットワークエラー

**テスト**: サーバーを停止してアクセス

| 項目 | 結果 | 備考 |
|------|------|------|
| エラーメッセージ表示 | ✅/❌ | |
| クラッシュなし | ✅/❌ | |
| リトライ機能 | ✅/❌ | |

### 6.2 無効なデータ

**テスト**: 不正なURLを入力

| 項目 | 結果 | 備考 |
|------|------|------|
| バリデーション動作 | ✅/❌ | |
| エラーメッセージ | ✅/❌ | |
| クラッシュなし | ✅/❌ | |

---

## 7. 発見された問題・バグ

### 問題 #1

**タイトル**: [問題の簡潔な説明]

**優先度**: ⭐⭐⭐ 高 / ⭐⭐ 中 / ⭐ 低

**再現手順**:
1. [ステップ1]
2. [ステップ2]
3. [ステップ3]

**期待される動作**:
[何が起こるべきか]

**実際の動作**:
[何が起こったか]

**スクリーンショット/ログ**:
[添付可能であれば]

**回避策**:
[あれば]

---

### 問題 #2

[上記と同じフォーマット]

---

## 8. 総合評価

### 8.1 テスト結果サマリー

| カテゴリ | 成功 | 失敗 | スキップ | 合計 |
|---------|------|------|---------|------|
| 基本機能 | | | | |
| 新規実装 | | | | |
| 後方互換性 | | | | |
| パフォーマンス | | | | |
| UI/UX | | | | |
| エラーハンドリング | | | | |
| **合計** | | | | |

**成功率**: [例: 95% (38/40)]

### 8.2 リリース判定

- [ ] **全てのテストが成功** → リリース可能
- [ ] **軽微な問題のみ** → 修正後リリース可能
- [ ] **重大な問題あり** → 修正必須、再テスト必要

### 8.3 推奨事項

#### リリース前に修正すべき項目
1. [項目1]
2. [項目2]

#### 将来のバージョンで改善すべき項目
1. [項目1]
2. [項目2]

### 8.4 追加コメント

[テスト全体を通して気づいた点、改善提案など]

---

## 9. 署名

**テスト実施者**: [名前]
**署名**: _______________
**日付**: [YYYY-MM-DD]

**レビュアー**: [名前]
**署名**: _______________
**日付**: [YYYY-MM-DD]

---

**このレポートは以下に保存してください**:
`docs/DEVICE_TEST_REPORT_[YYYYMMDD].md`
